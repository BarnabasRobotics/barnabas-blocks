<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google" value="notranslate">
  <title>Barnabas Blocks</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css">
  <script src="./js/blockly_compressed.js"></script>
  <script src="./js/blocks_compressed.js"></script>
  <script src="./js/arduino_compressed.js"></script>
  <script src="./js/typedVarModal.js"></script>
  <script src="./blocks/custom_blocks.js"></script>
  <script src="./js/md5-2.18.0.min.js"></script>
  <script src="./generators/custom_generators.js"></script>
  <link rel="icon" href="faviconGear.ico" type="image/x-icon">
  <link rel="shortcut icon" href="faviconGear.ico" type="image/x-icon">
</head>
<body>
  
  <table width="100%" height="100%">
    <tr id="titleRow">
      <td class="pageTitle">
        <img style="top: 6px; position: relative;" src="./images/barney.svg" alt="bbot" width="40px">
        Barnabas&rlm; Blocks - 
        <span id="title">...</span>
      </td>
      <td class="farSide">
        <select id="languageMenu" class="dropdown"></select>
        <img src="./images/logo_built_on_knockout.svg" alt="built on blockly" height="36"/>
        Ver: 1.0.4
      </td>
    </tr>
    <tr id="buttonRow">
      <td>
        <button id="newButton" class="" title="new">
          NEW
        </button>
        <button id="loadButton" class="" title="load">
          LOAD
        </button>
        <input type="file" id="load" style="display: none;">
        <button id="saveButton" class="" title="save">
          SAVE
        </button>
        <button id="editButton" class="" title="edit">
          TEXT
        </button>
        <span>
          <label for="boardSelect"> Select a board</label>
          <select id="boardSelect" class="">
            <option value="nano">Noggin</option>
            <option value="uno">Uno</option>
            <option value="ezDisplay">ezDisplay</option>
          </select>
        </span>
        <span>
          <label for="lessonSelect"> Select a lesson</label>
          <select id="lessonSelect" class="">
            <option value="bot">Barnabas Bot</option>
            <option value="racer">Advanced</option>
            <option value="ezDisplay">ezDisplay</option>
          </select>
        </span>
        <button id="linkButton" class="notext" title="...">
          <img src='media/1x1.gif' class="link icon21">
        </button>
        <button id="runButton" class="" title="...">
          UPLOAD
        </button>
        <button id="compileButton" class="" title="...">
          COMPILE
        </button>
        <button id="img2hex" onclick="window.open('img2hex.html')" class="hide">
          IMAGE MAKER
        </button>
      </td>
      <td class="farSide">

      </td>
    </tr>
    <tr>
      <td colspan=2>
        <table width="100%">
          <tr id="tabRow" height="1em">
            <td id="tab_blocks" class="tabon">...</td>
            <td class="tabmin tab_collapse">&nbsp;</td>
            <td id="tab_arduino" class="taboff tab_collapse" style="display: none;">Arduino</td>
            <td class="tabmin tab_collapse">&nbsp;</td>
            <td id="tab_editor" class="taboff tab_collapse">Editor</td>
            <td class="tabmin tab_collapse">&nbsp;</td>
            <td id="tab_monitor" class="taboff tab_collapse">Monitor</td>
            <td class="tabmin tab_collapse">&nbsp;</td>
            <td id="tab_xml" class="taboff tab_collapse" style="display: none;">XML</td>
            <td class="tabmin">&nbsp;</td>
            <td id="tab_code" class="taboff">
              <select id="code_menu"></select>
            </td>
            <td class="tabmax">
              
              <button id="monitorButton" class="" title="Click to Connect the SERIAL MONITOR">
                CONNECT
              </button>
              <button id="clearMonitor" class="" title="Click to Clear the SERIAL MONITOR">
                CLEAR
              </button>
              <input type=text id="textToSend" class="" title="Enter text to send">
              </input>
              <button id="sendButton" class="" title="Send Text">
                SEND
              </button>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td height="99%" colspan=2 id="content_area">
      </td>
    </tr>
  </table>
  <div id="content_blocks" class="content"></div>
  <textarea id="content_arduino" class="content" readonly></textarea>
  <textarea id="content_xml" class="content" wrap="off"></textarea>
  <pre id="content_monitor" class="content prettyprint lang-cpp"></pre>
  <div id="content_editor" class="content"></div>


  <xml xmlns="https://developers.google.com/blockly/xml" id="racer_toolbox" style="display: none">
    <category id="racer_controls" name="Controls" categorystyle="controls" >
      <block type="controls_setup" class="racer"></block>
      <block type="controls_wait">
        <value name="DELAY_TIME">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="controls_repeat_times">
        <value name="TIMES">
          <block type="math_number">
            <field name="NUM">5</field>
          </block>
        </value>
      </block>
      <block type="controls_delay" class="racer">
        <value name="DELAY_TIME">
          <block type="math_number">
            <field name="NUM">1000</field>
          </block>
        </value>
      </block>
      <block type="controls_if" colour="60"></block>
      <block type="controls_if">
        <mutation else="1"></mutation>
      </block>
      <block type="controls_if">
        <mutation elseif="1" else="1"></mutation>
      </block>
      <block type="controls_whileUntil" class="racer"></block>
      <block type="controls_flow_statements" class="racer"></block>
      <category name="Subroutines" colour="60" custom="PROCEDURE" class="racer"></category>
    </category>
    <category id="racer_test" name="Tests" categorystyle="tests" class="racer">
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
      <block type="extra_logic"></block>
      <block type="logic_null"></block>
      <block type="logic_ternary"></block>
    </category>
    <category name="Math Operators" categorystyle="math" class="racer">
      <block type="math_arithmetic">
        <value name="A">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="B">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="math_single">
        <value name="NUM"> 
          <block type="math_number">
            <field name="NUM">9</field>
          </block>
        </value>
      </block>
      <block type="math_trig">
        <value name="NUM">
          <block type="math_number">
            <field name="NUM">45</field>
          </block>
        </value>
      </block>
      <block type="math_constrain">
        <value name="VALUE">
          <block type="math_number">
            <field name="NUM">50</field>
          </block>
        </value>
        <value name="LOW">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="HIGH">
          <block type="math_number">
            <field name="NUM">100</field>
          </block>
        </value>
      </block>
      <block type="math_random_int">
        <value name="FROM">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <field name="NUM">100</field>
          </block>
        </value>
      </block>
      <block type="operators_map"></block>
    </category>
    <category name="%{BKY_CATVARIABLES}" colour="%{BKY_VARIABLES_HUE}" custom="CREATE_TYPED_VARIABLE" class="racer"></category>
    <category name="Constants" categorystyle="constants" class="racer">
      <block type="math_number">
        <field name="NUM">123</field>
      </block>
      <block type="math_constant"></block>
      <block type="boolean_onoff"></block>
      <block type="boolean_hilo"></block>
      <block type="text"></block>
    </category>
    <category name="Communication"  categorystyle="comm">
      <block type="serial_println">
        <value name="CONTENT">
          <block type="text"></block>
        </value>
      </block>
      <block type="text"></block>
    </category>
    <category name="Lights" categorystyle="lights">
      <block type="lights_led">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="STATUS">
          <block type="boolean_onoff"></block>
        </value>
      </block>
    </category>
    <category name="Sounds" categorystyle="sounds">
      <block type="sounds_tone">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="FREQ">
          <block type="math_number">
            <field name="NUM">440</field>
          </block>
        </value>
      </block>
      <block type="sounds_noTone">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
    </category>
    <category name="Motors" categorystyle="motors" >
      <block type="motors_servo">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="DEGREE">
          <block type="math_number">
            <field name="NUM">180</field>
          </block>
        </value>
      </block>
      <block type="motors_dc">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
        <value name="VALUE">
          <block type="math_number">
            <field name="NUM">255</field>
          </block>
        </value>
      </block>
    </category>
    <category name="Sensors" categorystyle="sensors" class="racer ">
      <block type="logic_compare" inputsInline="false">
        <value name="A">
          <block type="boolean_button"></block>
        </value>
        <value name="B">
          <block type="boolean_pressed"></block>
        </value>
      </block>
      <block type="sensors_sonic">
        <value name="ECHO">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
        <value name="TRIGGER">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="pulsein">
        <value name="pin">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="type">
          <block type="boolean_hilo">
            <field name="BOOL">HIGH</field>
          </block>
        </value>
        <value name="timeout">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
      </block>
    </category>
  </xml>

  <xml xmlns="https://developers.google.com/blockly/xml" id="bot_toolbox"   style="display: none">
    <category id="bot_controls" name="Control" categorystyle="controls" >
      <block type="controls_loop"></block>
      <block type="controls_wait">
        <value name="DELAY_TIME">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="controls_repeat_times">
        <value name="TIMES">
          <block type="math_number">
            <field name="NUM">5</field>
          </block>
        </value>
      </block>
        <value name="DELAY_TIME">
          <block type="math_number">
            <field name="NUM">1000</field>
          </block>
        </value>
      </block>
    </category>
    <category id="bot_lights" name="Lights" categorystyle="lights">
      <block type="lights_led">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="STATUS">
          <block type="boolean_onoff"></block>
        </value>
      </block>
    </category>
    <category name="Sounds" categorystyle="sounds">
      <block type="sounds_tone">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="FREQ">
          <block type="math_number">
            <field name="NUM">440</field>
          </block>
        </value>
      </block>
      <block type="sounds_noTone">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
    </category>
    <category name="Motors" categorystyle="motors" >
      <block type="motors_servo">
        <value name="PIN">
          <block type="math_number">
            <field name="NUM">6</field>
          </block>
        </value>
        <value name="DEGREE">
          <block type="math_number">
            <field name="NUM">180</field>
          </block>
        </value>
      </block>
    </category>
  </xml>

  <xml xmlns="https://developers.google.com/blockly/xml" id="ezDisplay_toolbox" style="display: none">
    <category id="ezDisplay_controls" name="Controls" categorystyle="controls" >
      <block type="controls_setup" class="ezDisplay"></block>
      <block type="controls_wait">
        <value name="DELAY_TIME">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="controls_repeat_times">
        <value name="TIMES">
          <block type="math_number">
            <field name="NUM">5</field>
          </block>
        </value>
      </block>
      <block type="controls_delay" class="ezDisplay">
        <value name="DELAY_TIME">
          <block type="math_number">
            <field name="NUM">1000</field>
          </block>
        </value>
      </block>
      <block type="controls_if" colour="60"></block>
      <block type="controls_if">
        <mutation else="1"></mutation>
      </block>
      <block type="controls_if">
        <mutation elseif="1" else="1"></mutation>
      </block>
      <block type="controls_whileUntil" class="ezDisplay"></block>
      <block type="controls_flow_statements" class="ezDisplay"></block>
      <category name="Subroutines" colour="60" custom="PROCEDURE" class="ezDisplay"></category>
    </category>
    <category id="ezDisplay_test" name="Tests" categorystyle="tests" class="ezDisplay">
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
      <block type="extra_logic"></block>
      <block type="logic_null"></block>
      <block type="logic_ternary"></block>
    </category>
    <category name="Math Operators" categorystyle="math" class="ezDisplay">
      <block type="math_arithmetic">
        <value name="A">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="B">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="math_single">
        <value name="NUM">
          <block type="math_number">
            <field name="NUM">9</field>
          </block>
        </value>
      </block>
      <block type="math_trig">
        <value name="NUM">
          <block type="math_number">
            <field name="NUM">45</field>
          </block>
        </value>
      </block>
      <block type="math_constrain">
        <value name="VALUE">
          <block type="math_number">
            <field name="NUM">50</field>
          </block>
        </value>
        <value name="LOW">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="HIGH">
          <block type="math_number">
            <field name="NUM">100</field>
          </block>
        </value>
      </block>
      <block type="math_random_int">
        <value name="FROM">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <field name="NUM">100</field>
          </block>
        </value>
      </block>
      <block type="operators_map"></block>
    </category>
    <category name="%{BKY_CATVARIABLES}" colour="%{BKY_VARIABLES_HUE}" custom="CREATE_TYPED_VARIABLE" class="ezDisplay"></category>
    <category name="Constants" categorystyle="constants" class="ezDisplay">
      <block type="math_number">
        <field name="NUM">123</field>
      </block>
      <block type="math_constant"></block>
      <block type="boolean_onoff"></block>
      <block type="text"></block>
    </category>
    <category name="Sensors" categorystyle="sensors" class="ezDisplay">
      <block type="logic_compare" inputsInline="false">
        <value name="A">
          <block type="boolean_button">
            <field name="PIN">4</field>
          </block>
        </value>
        <value name="B">
          <block type="boolean_pressed"></block>
        </value>
      </block>
      <block type="pulsein">
        <value name="pin">
          <block type="math_number">
            <field name="NUM">4</field>
          </block>
        </value>
        <value name="type">
          <block type="boolean_hilo">
            <field name="BOOL">LOW</field>
          </block>
        </value>
        <value name="timeout">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
      </block>
    </category>
    <category name="ezDisplay" categorystyle="ezDisplay" class="ezDisplay">
      <block type="SSD1306_clear"></block>
      <block type="SSD1306_print">
        <value name="CONTENT">
          <block type="text"></block>
        </value>
      </block>
      <block type="SSD1306_set_font">
        <value name="FONT">
          <block type="SSD1306_font"> </block>
        </value>
      </block>
      <block type="SSD1306_set_cursor">
        <value name="X">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
        <value name="Y">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
      </block>
      <block type="SSD1306_print_image">
        <value name="CONTENT">
          <block type="text"></block>
        </value>
        <value name="X">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
        <value name="Y">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
        <value name="W">
          <block type="math_number">
            <field name="NUM">128</field>
          </block>
        </value>
        <value name="H">
          <block type="math_number">
            <field name="NUM">8</field>
          </block>
        </value>
      </block>
      <block type="SSD1306_framebuffer_render"></block>
      <block type="SSD1306_framebuffer_display"></block>
      <block type="SSD1306_framebuffer_both"></block>
    </category>
  </xml>

  <div id="notSupported" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close" onclick='Code.close("notSupported")'>&times;</span>
        <h2>Can not access your <span id="board">...</span></h2>
      </div>
      <div class="modal-body">
        Sorry, <b>Web Serial</b> is not flagged "supported" in this browser, make sure you're
        running MS Edge or Chrome 78 or later and have enabled the
        <code style="white-space: nowrap;">#enable-experimental-web-platform-features</code> flag in
        <code>chrome://flags</code>
      </div>
      <div class="modal-footer" style="text-align: right;">
        <a href="http://" class="" target="_blank"
          rel="noopener noreferrer">How to enable Experimental
          Flags</a>
      </div>
    </div>
  </div>

  <div id="arduinoOutput" class="modal">
    <div class="modal-sheet">
      <div class="modal-body" id="response">
        ...
      </div>
      <div class="modal-footer">
        <span class="closeText" onclick='Code.close("arduinoOutput")'>Close</span>
      </div>
    </div>
  </div>
  
  <script src="./js/avrgirl-arduino.global.js"></script>
  <script src="./js/FileSaver.min.js"></script>
  <script src="./js/file_handling.js"></script>
  <script src="./js/usb_serial.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q==" crossorigin="anonymous"></script>
  <script src="./js/code.js"></script>
</body>
</html>
